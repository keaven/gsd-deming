<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to derive group sequential designs for time-to-event endpoints under both proportional and non-proportional hazards assumptions for randomized clinical trials.">
<title>Group Sequential Design Under Non-Proportional Hazards - 2&nbsp; Proportional hazards</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ahr.html" rel="next">
<link href="./background.html" rel="prev">
<link href="./assets/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="Group Sequential Design Under Non-Proportional Hazards - 2&nbsp; Proportional hazards">
<meta property="og:description" content="Learn how to derive group sequential designs for time-to-event endpoints under both proportional and non-proportional hazards assumptions for randomized clinical trials.">
<meta property="og:image" content="https://keaven.github.io/gsd-deming/assets/preview.jpg">
<meta property="og:site_name" content="Group Sequential Design Under Non-Proportional Hazards">
<meta name="twitter:title" content="Group Sequential Design Under Non-Proportional Hazards - 2&nbsp; Proportional hazards">
<meta name="twitter:description" content="Learn how to derive group sequential designs for time-to-event endpoints under both proportional and non-proportional hazards assumptions for randomized clinical trials.">
<meta name="twitter:image" content="https://keaven.github.io/gsd-deming/assets/preview.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./proportional-hazards.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Proportional hazards</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Group Sequential Design Under Non-Proportional Hazards</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/keaven/gsd-deming" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Background</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./proportional-hazards.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Proportional hazards</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ahr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Average hazard ratio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pkgs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to gsdmvn, gsDesign2, and simtrial</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./other-tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Others tests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fixed-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Fixed design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wlr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Weighted logrank test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wlr-boundary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Group sequential design boundary with weighted logrank test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./maxcombo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">MaxCombo test</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./maxcombo-boundary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Group sequential design boundary with MaxCombo test</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#sec-lachin-foulkes" id="toc-sec-lachin-foulkes" class="nav-link active" data-scroll-target="#sec-lachin-foulkes"><span class="header-section-number">2.1</span> Lachin and Foulkes method</a></li>
  <li><a href="#sec-median-survival" id="toc-sec-median-survival" class="nav-link" data-scroll-target="#sec-median-survival"><span class="header-section-number">2.2</span> Metastatic oncology example</a></li>
  <li><a href="#cardiovascular-outcomes-reduction" id="toc-cardiovascular-outcomes-reduction" class="nav-link" data-scroll-target="#cardiovascular-outcomes-reduction"><span class="header-section-number">2.3</span> Cardiovascular outcomes reduction</a></li>
  <li>
<a href="#cardiovascular-outcomes-non-inferiority" id="toc-cardiovascular-outcomes-non-inferiority" class="nav-link" data-scroll-target="#cardiovascular-outcomes-non-inferiority"><span class="header-section-number">2.4</span> Cardiovascular outcomes non-inferiority</a>
  <ul class="collapse">
<li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="header-section-number">2.4.1</span> Exercise</a></li>
  </ul>
</li>
  <li>
<a href="#sec-poisson-mixture" id="toc-sec-poisson-mixture" class="nav-link" data-scroll-target="#sec-poisson-mixture"><span class="header-section-number">2.5</span> Cure model</a>
  <ul class="collapse">
<li><a href="#cure-model-parameters" id="toc-cure-model-parameters" class="nav-link" data-scroll-target="#cure-model-parameters"><span class="header-section-number">2.5.1</span> Cure model parameters</a></li>
  <li><a href="#expected-event-accumulation-over-time" id="toc-expected-event-accumulation-over-time" class="nav-link" data-scroll-target="#expected-event-accumulation-over-time"><span class="header-section-number">2.5.2</span> Expected event accumulation over time</a></li>
  <li><a href="#the-design" id="toc-the-design" class="nav-link" data-scroll-target="#the-design"><span class="header-section-number">2.5.3</span> The design</a></li>
  <li><a href="#updating-calendar-based-spending-bounds-at-analysis" id="toc-updating-calendar-based-spending-bounds-at-analysis" class="nav-link" data-scroll-target="#updating-calendar-based-spending-bounds-at-analysis"><span class="header-section-number">2.5.4</span> Updating calendar-based spending bounds at analysis</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/keaven/gsd-deming/edit/main/proportional-hazards.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/keaven/gsd-deming/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/keaven/gsd-deming/blob/main/proportional-hazards.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-proportional-hazards" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Proportional hazards</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>We consider designs under the assumption of proportional hazards in this chapter applying the <strong>gsDesign</strong> package. These will be most easily be developed using the gsDesign Shiny app at <a href="https://rinpharma.shinyapps.io/gsdesign/" class="uri">https://rinpharma.shinyapps.io/gsdesign/</a>. We have saved designs that can be re-loaded into the app in the book website at <a href="https://github.com/keaven/gsd-deming" class="uri">https://github.com/keaven/gsd-deming</a>; if you copy the repository to your local PC, you will be able to easily access these designs.</p>
<p>After a brief review of methodology, we recreate designs and evaluate final inference for multiple published trials:</p>
<ul>
<li>We begin with the KEYNOTE-189 trial <span class="citation" data-cites="KEYNOTE189">(<a href="references.html#ref-KEYNOTE189" role="doc-biblioref">Gandhi et al. 2018</a>)</span> to show a straightforward, common application in metastatic (high-risk) cancer.</li>
<li>We proceed to the AFCAPS/TexCAPS trial <span class="citation" data-cites="AFCAPSdesign AFCAPSresults">(<a href="references.html#ref-AFCAPSdesign" role="doc-biblioref">Downs et al. 1997</a>, <a href="references.html#ref-AFCAPSresults" role="doc-biblioref">1998</a>)</span>, a cardiovascular endpoint trial with much lower risk than a metastatic oncology trial.</li>
<li>Next, we look at the EXAMINE trial <span class="citation" data-cites="EXAMINEresults">(<a href="references.html#ref-EXAMINEresults" role="doc-biblioref">White et al. 2013</a>)</span>, a trial in diabetic patients evaluating a non-inferiority hypothesis for cardiovascular outcomes.</li>
</ul>
<p>We also create a design for a hypothetical trial in oncology where a long-term plateau in endpoints is likely. We approach this with a proportional hazards cure model. We also demonstrate the use of calendar-based spending for this example.</p>
<section id="sec-lachin-foulkes" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="sec-lachin-foulkes">
<span class="header-section-number">2.1</span> Lachin and Foulkes method</h2>
<p>The <strong>gsDesign</strong> R package focuses on sample size and power derivation primarily on the method of Lachin and Foulkes <span class="citation" data-cites="LachinFoulkes">(<a href="references.html#ref-LachinFoulkes" role="doc-biblioref">Lachin and Foulkes 1986</a>)</span>. This allows simple specification of piecewise constant enrollment, failure rates and dropout rates which can approximate general distributions for each. While the sample size implementation focuses primarily on increasing enrollment rate to achieve power within a targeted trial duration, there is also an option to fix a maximum enrollment rate and extend follow-up until power is achieved as in <span class="citation" data-cites="KimTsiatis">Kim and Tsiatis (<a href="references.html#ref-KimTsiatis" role="doc-biblioref">1990</a>)</span>; this method will not always work without some adjustment in assumptions. The methods all focus on 2-arm trials with a constant treatment effect over time (proportional hazards). It is assumed that a (stratified) logrank test or Wald test with a Cox model coefficient are used for statistical testing. The number of events drives power, regardless of study duration, as noted by <span class="citation" data-cites="Schoenfeld1981">Schoenfeld (<a href="references.html#ref-Schoenfeld1981" role="doc-biblioref">1981</a>)</span>; that approximation for event requirements is provided in the <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">nSurv()</a></code> function for fixed design and <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> for group sequential design as can be seen by code generated in the app or in <strong>gsDesign</strong> package documentation.</p>
<p>One place where we deviate from the Lachin and Foulkes method is when we approximate the hazard ratio at study bounds. This should always be considered an approximation that is informative to those reviewing the design rather than a requirement to cross a bound. In any case, the approximation is that of <span class="citation" data-cites="Schoenfeld1981">Schoenfeld (<a href="references.html#ref-Schoenfeld1981" role="doc-biblioref">1981</a>)</span>, which is quite simple and implemented in the function <code><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsDesign::gsHR()</a></code>.</p>
</section><section id="sec-median-survival" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="sec-median-survival">
<span class="header-section-number">2.2</span> Metastatic oncology example</h2>
<p>The KEYNOTE-189 trial (<span class="citation" data-cites="KEYNOTE189">Gandhi et al. (<a href="references.html#ref-KEYNOTE189" role="doc-biblioref">2018</a>)</span>) evaluated progression-free survival (PFS) and overall survival (OS) in patients with previously untreated metastatic non-small cell lung cancer (NSCLC). Patients were all treated with chemotherapy and randomized 2:1 to an add-on of pembrolizumab or placebo. The most important finding was: <em>After a median follow-up of 10.5 months, the estimated rate of overall survival at 12 months was 69.2% (95% confidence interval [CI], 64.1 to 73.8) in the pembrolizumab-combination group versus 49.4% (95% CI, 42.1 to 56.2) in the placebo-combination group (hazard ratio for death, 0.49; 95% CI, 0.38 to 0.64; P&lt;0.001)</em> <span class="citation" data-cites="KEYNOTE189">(<a href="references.html#ref-KEYNOTE189" role="doc-biblioref">Gandhi et al. 2018</a>)</span>.</p>
<p>The design allocated 0.025 family-wise error rate (FWER, also referred to as 1-sided Type I error) between PFS (<span class="math inline">\(\alpha=0.095\)</span>) and OS (<span class="math inline">\(\alpha=0.015\)</span>). The graphical method <span class="math inline">\(\alpha\)</span>-control for group sequential design of <span class="citation" data-cites="MaurerBretz2013">Maurer and Bretz (<a href="references.html#ref-MaurerBretz2013" role="doc-biblioref">2013</a>)</span> was used to control Type I error. We further review the design for OS here but do not attempt to exactly reproduce all details. Key aspects of the design as documented in the protocol accompanying <span class="citation" data-cites="KEYNOTE189">Gandhi et al. (<a href="references.html#ref-KEYNOTE189" role="doc-biblioref">2018</a>)</span> were:</p>
<ul>
<li>
<span class="math inline">\(\alpha=0.0155\)</span>.</li>
<li>Control group survival follows an exponential distribution with a median of 13 months.</li>
<li>Exponential dropout rate of 0.1% per month.</li>
<li>90% power to detect a hazard ratio of 0.7.</li>
<li>2:1 randomization, experimental:control.</li>
<li>Enrollment over 1 year; while not specified in the protocol, we have further assumed.</li>
<li>Trial duration of approximately 35 months.</li>
<li>Observed deaths of 240, 332, and 416 at the 3 planned analyses; this yields information fractions of 0.5769231 and 0.7980769 at the interim analyses.</li>
<li>A one-sided bound using the <span class="citation" data-cites="LanDeMets">Lan and DeMets (<a href="references.html#ref-LanDeMets" role="doc-biblioref">1983</a>)</span> spending function approximating an O’Brien-Fleming bound.</li>
</ul>
<p>We adjusted the exponential dropout rate to 0.133% per month and hazard ratio to 0.70025 in the following so that both targeted events and targeted sample size would be close to integers. This sort of adjustment can limit any confusion over the computation of interim bounds, as will be demonstrated.</p>
<p>The design is derived as:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://keaven.github.io/gsDesign/">gsDesign</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">KEYNOTE189design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv</a></span><span class="op">(</span></span>
<span>  <span class="co"># Number of analyses</span></span>
<span>  k <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  <span class="co"># One-sided design</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="co"># 1-sided Type I error</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.0155</span>,</span>
<span>  <span class="co"># Type II error (1 - targeted power)</span></span>
<span>  beta <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  <span class="co"># Timing (information fraction) at interim analyses</span></span>
<span>  timing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5769231</span>, <span class="fl">0.7980769</span><span class="op">)</span>,</span>
<span>  <span class="co"># Efficacy bound spending function (no spending parameter needed)</span></span>
<span>  sfu <span class="op">=</span> <span class="va">sfLDOF</span>,</span>
<span>  <span class="co"># Control group exponential failure rate to get median OS of 13 months</span></span>
<span>  lambdaC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">13</span>,</span>
<span>  <span class="co"># Alternate hypothesis hazard ratio</span></span>
<span>  hr <span class="op">=</span> <span class="fl">0.70025</span>,</span>
<span>  <span class="co"># Dropout rate (exponential rate)</span></span>
<span>  eta <span class="op">=</span> <span class="fl">0.00133</span>,</span>
<span>  <span class="co"># Enrollment rates during ramp-up period</span></span>
<span>  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">5</span>, <span class="fl">7.5</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  <span class="co"># Relative enrollment rate time period durations</span></span>
<span>  R <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  <span class="co"># Calendar time of final analysis</span></span>
<span>  T <span class="op">=</span> <span class="fl">35</span>,</span>
<span>  <span class="co"># Minimum follow-up time after enrollment complete</span></span>
<span>  minfup <span class="op">=</span> <span class="fl">23</span>,</span>
<span>  <span class="co"># Randomization ratio (experimental/placebo)</span></span>
<span>  ratio <span class="op">=</span> <span class="fl">2</span></span>
<span><span class="op">)</span></span>
<span><span class="va">KEYNOTE189design</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span>ratio <span class="op">=</span> <span class="fl">2</span>, digits <span class="op">=</span> <span class="fl">5</span>, ddigits <span class="op">=</span> <span class="fl">2</span>, tdigits <span class="op">=</span> <span class="fl">1</span>, timename <span class="op">=</span> <span class="st">"Month"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"KEYNOTE189 OS design"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="caejgcrpvl" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#caejgcrpvl table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#caejgcrpvl thead, #caejgcrpvl tbody, #caejgcrpvl tfoot, #caejgcrpvl tr, #caejgcrpvl td, #caejgcrpvl th {
  border-style: none;
}

#caejgcrpvl p {
  margin: 0;
  padding: 0;
}

#caejgcrpvl .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#caejgcrpvl .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#caejgcrpvl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#caejgcrpvl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#caejgcrpvl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#caejgcrpvl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#caejgcrpvl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#caejgcrpvl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#caejgcrpvl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#caejgcrpvl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#caejgcrpvl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#caejgcrpvl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#caejgcrpvl .gt_spanner_row {
  border-bottom-style: hidden;
}

#caejgcrpvl .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#caejgcrpvl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#caejgcrpvl .gt_from_md > :first-child {
  margin-top: 0;
}

#caejgcrpvl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#caejgcrpvl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#caejgcrpvl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#caejgcrpvl .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#caejgcrpvl .gt_row_group_first td {
  border-top-width: 2px;
}

#caejgcrpvl .gt_row_group_first th {
  border-top-width: 2px;
}

#caejgcrpvl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#caejgcrpvl .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#caejgcrpvl .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#caejgcrpvl .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#caejgcrpvl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#caejgcrpvl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#caejgcrpvl .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#caejgcrpvl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#caejgcrpvl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#caejgcrpvl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#caejgcrpvl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#caejgcrpvl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#caejgcrpvl .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#caejgcrpvl .gt_left {
  text-align: left;
}

#caejgcrpvl .gt_center {
  text-align: center;
}

#caejgcrpvl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#caejgcrpvl .gt_font_normal {
  font-weight: normal;
}

#caejgcrpvl .gt_font_bold {
  font-weight: bold;
}

#caejgcrpvl .gt_font_italic {
  font-style: italic;
}

#caejgcrpvl .gt_super {
  font-size: 65%;
}

#caejgcrpvl .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#caejgcrpvl .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#caejgcrpvl .gt_indent_1 {
  text-indent: 5px;
}

#caejgcrpvl .gt_indent_2 {
  text-indent: 10px;
}

#caejgcrpvl .gt_indent_3 {
  text-indent: 15px;
}

#caejgcrpvl .gt_indent_4 {
  text-indent: 20px;
}

#caejgcrpvl .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">KEYNOTE189 OS design</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 58%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.98048</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 617</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00144</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 240</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.66490</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Month: 19.2</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.00144</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.7</td>
<td class="gt_row gt_right" headers="Efficacy">0.36500</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">IA 2: 80%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.49564</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">N: 617</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00629</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 332</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.74785</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Month: 26.1</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.00674</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.7</td>
<td class="gt_row gt_right" headers="Efficacy">0.73080</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.21487</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 617</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.01338</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 416</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.79425</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Month: 35</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.01550</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.7</td>
<td class="gt_row gt_right" headers="Efficacy">0.90000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>We further describe the information in this table as follows:</p>
<ul>
<li>The IA percent is the percent of statistical information (planned events) at the interim analysis relative to the final analysis. This matches the timing input.</li>
<li>We note that while sample size (N) and events are rounded up in the table, the design stores continuous values for these numbers to exactly match the input timing of analyses. Thus, calculating with rounded up numbers in the table may not exactly match the IA % in the table.</li>
<li>The calendar timing of the analysis is the expected timing relative to opening of enrollment.</li>
<li>Z-values are for standard normal test statistics with positive values representing a treatment benefit for the experimental group.</li>
<li>
<span class="math inline">\(p\)</span>-values are nominal <span class="math inline">\(p\)</span>-values corresponding to the Z-values.</li>
<li>~HR at bound is an asymptotic approximation for the hazard ratio required to cross a bound. This is not a criterion that must be met for Type I error control.</li>
<li>P(Cross) if HR=1 is the cumulative probability of crossing a bound (efficacy or futility) at or before a given analysis. We note that for the default non-binding Type I error option that P(Cross) if HR=1 will be less than the specified Type I error. This is because Type I error is computed ignoring the futility bound since it is advisory only. The actual cumulative Type I error spending is 0.001439, 0.00674, 0.0155.</li>
<li>P(Cross) if HR =0.7 is the cumulative probability of crossing a bound under the alternate hypothesis.</li>
</ul>
<p>The design is updated at the interim analysis with 235 deaths as follows. The code can be written by the app for you, this is provided only if you wish to dive into details. We note that the function <code><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign()</a></code> is used for the update while <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> was used for the original design. The <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> function is useful to approximate calendar timing of event accrual, something that is no longer needed at the time of interim analysis. Note that the <code><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary()</a></code> call below is specifically state treatment differences in the table on the hazard ratio scale as well as to interpret the event count as the key to calculating information fraction at the analysis.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">KEYNOTE189design</span></span>
<span><span class="va">xu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign</a></span><span class="op">(</span></span>
<span>  <span class="co"># First 3 parameters are all updated</span></span>
<span>  k <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">k</span>, <span class="co"># This must be at least 2</span></span>
<span>  n.I <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">235</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">ceiling</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="co"># Enter integers for actual events</span></span>
<span>  <span class="co"># This parameter sets spending (information) fraction as</span></span>
<span>  <span class="co"># planned final event count from the original trial design</span></span>
<span>  maxn.IPlan <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">k</span><span class="op">]</span>,</span>
<span>  <span class="co"># REMAINING PARAMETERS COPIED FROM ORIGINAL DESIGN</span></span>
<span>  test.type <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">test.type</span>, alpha <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">beta</span>,</span>
<span>  astar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">astar</span>, sfu <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  delta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta</span>, delta1 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta1</span>, delta0 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we summarize bounds in a table</span></span>
<span><span class="va">xu</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span></span>
<span>    deltaname <span class="op">=</span> <span class="st">"HR"</span>, <span class="co"># Name of treatment difference measure</span></span>
<span>    logdelta <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># For survival, delta is on a log scale; this transforms</span></span>
<span>    Nname <span class="op">=</span> <span class="st">"Events"</span>, <span class="co"># "N" for analyses is events for survival analysis</span></span>
<span>    digits <span class="op">=</span> <span class="fl">5</span>, <span class="co"># Decimals for numbers in body of table</span></span>
<span>    ddigits <span class="op">=</span> <span class="fl">2</span>, <span class="co"># Decimals for natural parameter; HR in this case</span></span>
<span>    tdigits <span class="op">=</span> <span class="fl">1</span>, <span class="co"># Time digits (not needed here)</span></span>
<span>    <span class="co"># We select key parameters for printing</span></span>
<span>    exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>      <span class="st">"B-value"</span>, <span class="st">"CP"</span>, <span class="st">"CP H1"</span>, <span class="st">"PP"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"P(Cross) if HR="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">hr0</span>, <span class="va">x</span><span class="op">$</span><span class="va">hr</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Updated bounds for interim analysis"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"KEYNOTE-189 trial"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="zvwusnsnrc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zvwusnsnrc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zvwusnsnrc thead, #zvwusnsnrc tbody, #zvwusnsnrc tfoot, #zvwusnsnrc tr, #zvwusnsnrc td, #zvwusnsnrc th {
  border-style: none;
}

#zvwusnsnrc p {
  margin: 0;
  padding: 0;
}

#zvwusnsnrc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zvwusnsnrc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zvwusnsnrc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zvwusnsnrc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zvwusnsnrc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zvwusnsnrc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zvwusnsnrc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zvwusnsnrc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zvwusnsnrc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zvwusnsnrc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zvwusnsnrc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zvwusnsnrc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zvwusnsnrc .gt_spanner_row {
  border-bottom-style: hidden;
}

#zvwusnsnrc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zvwusnsnrc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zvwusnsnrc .gt_from_md > :first-child {
  margin-top: 0;
}

#zvwusnsnrc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zvwusnsnrc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zvwusnsnrc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zvwusnsnrc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zvwusnsnrc .gt_row_group_first td {
  border-top-width: 2px;
}

#zvwusnsnrc .gt_row_group_first th {
  border-top-width: 2px;
}

#zvwusnsnrc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zvwusnsnrc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zvwusnsnrc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zvwusnsnrc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zvwusnsnrc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zvwusnsnrc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zvwusnsnrc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zvwusnsnrc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zvwusnsnrc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zvwusnsnrc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zvwusnsnrc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zvwusnsnrc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zvwusnsnrc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zvwusnsnrc .gt_left {
  text-align: left;
}

#zvwusnsnrc .gt_center {
  text-align: center;
}

#zvwusnsnrc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zvwusnsnrc .gt_font_normal {
  font-weight: normal;
}

#zvwusnsnrc .gt_font_bold {
  font-weight: bold;
}

#zvwusnsnrc .gt_font_italic {
  font-style: italic;
}

#zvwusnsnrc .gt_super {
  font-size: 65%;
}

#zvwusnsnrc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zvwusnsnrc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zvwusnsnrc .gt_indent_1 {
  text-indent: 5px;
}

#zvwusnsnrc .gt_indent_2 {
  text-indent: 10px;
}

#zvwusnsnrc .gt_indent_3 {
  text-indent: 15px;
}

#zvwusnsnrc .gt_indent_4 {
  text-indent: 20px;
}

#zvwusnsnrc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal">Updated bounds for interim analysis</th>
</tr>
<tr class="odd gt_heading">
<th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">KEYNOTE-189 trial</th>
</tr>
<tr class="header gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 56%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">3.01615</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 235</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00128</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.67469</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00128</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 2: 80%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.49300</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 332</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00633</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.76060</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00546</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.21461</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 416</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.01339</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.80480</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00876</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>The <span class="math inline">\(p\)</span>-value reported at interim 1 was &lt;0.001 <span class="citation" data-cites="KEYNOTE189">(<a href="references.html#ref-KEYNOTE189" role="doc-biblioref">Gandhi et al. 2018</a>)</span>, establishing statistical significance relative to the bound of 0.00128 in the summary table above as well as in the publication.</p>
</section><section id="cardiovascular-outcomes-reduction" class="level2" data-number="2.3"><h2 data-number="2.3" class="anchored" data-anchor-id="cardiovascular-outcomes-reduction">
<span class="header-section-number">2.3</span> Cardiovascular outcomes reduction</h2>
<p>The AFCAPS/TexCAPS trial evaluated the use of lovastatin to reduce cardiovascular outcomes. The design was described in <span class="citation" data-cites="AFCAPSdesign">Downs et al. (<a href="references.html#ref-AFCAPSdesign" role="doc-biblioref">1997</a>)</span> while results were reported in <span class="citation" data-cites="AFCAPSresults">Downs et al. (<a href="references.html#ref-AFCAPSresults" role="doc-biblioref">1998</a>)</span>. We approximate the design and evaluation of statistical significance here. Software and some assumptions of the model were not completely clear, so this is not an exact reproduction of the design, but is very close. Key assumptions we replicate here:</p>
<ul>
<li>5 years minimum follow-up of all patients enrolled.</li>
<li>Interim analyses after 0.375 and 0.75 of final planned event count has accrued.</li>
<li>2-sided bound using the <span class="citation" data-cites="HSD">Hwang, Shih, and De Cani (<a href="references.html#ref-HSD" role="doc-biblioref">1990</a>)</span> spending function with parameter <span class="math inline">\(\gamma = -4\)</span> to approximate an O’Brien-Fleming bound.</li>
<li>We arbitrarily set the following parameters to match the design:
<ul>
<li>Power of 90% for a hazard ratio of 0.6921846; this is slightly different than the 0.7 hazard ratio suggested in <span class="citation" data-cites="AFCAPSdesign">Downs et al. (<a href="references.html#ref-AFCAPSdesign" role="doc-biblioref">1997</a>)</span> due to the use of the <span class="citation" data-cites="LachinFoulkes">Lachin and Foulkes (<a href="references.html#ref-LachinFoulkes" role="doc-biblioref">1986</a>)</span> method used in <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> routine below.</li>
<li>Enrollment duration of 1/2 year with constant enrollment.</li>
<li>An exponential failure rate of 0.01131 per year which is nearly identical to the annual dropout rate of 0.01125.</li>
<li>An exponential dropout rate of 0.004 per year which is nearly identical to the annual dropout rate of 0.00399.</li>
</ul>
</li>
</ul>
<p>The design has been saved and can be reloaded from the gsDesign Shiny app from the book website in the <code>data</code> directory from the file <code>AFCAPSDesign.rds</code>. We provide code generated there for the design. This begins with loading the <strong>gsDesign</strong> package and setting parameters for the design with associated comments to help explain; default comments have been updated here. More parameters than needed are given than sometimes needed when code is generated by the app. Comments indicate where this is the case. Code and comments are largely copied from the app, so this may help the reader interpret what they see there.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Number of analyses</span></span>
<span><span class="va">k</span> <span class="op">&lt;-</span> <span class="fl">3</span></span>
<span><span class="co"># See gsDesign() help for description of boundary types</span></span>
<span><span class="va">test.type</span> <span class="op">&lt;-</span> <span class="fl">2</span> <span class="co"># This indicates a 2-sided design</span></span>
<span><span class="co"># 1-sided Type I error</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fl">0.025</span></span>
<span><span class="co"># Type II error (1 - targeted power)</span></span>
<span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fl">0.1</span></span>
<span><span class="co"># If test.type = 5 or 6, this sets maximum spending for futility</span></span>
<span><span class="co"># under the null hypothesis. Otherwise, this is ignored.</span></span>
<span><span class="co"># (astar did not need to be specified in this case)</span></span>
<span><span class="va">astar</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="co"># Timing (information fraction) at interim analyses</span></span>
<span><span class="va">timing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.375</span>, <span class="fl">0.75</span><span class="op">)</span></span>
<span><span class="co"># Efficacy bound spending function</span></span>
<span><span class="va">sfu</span> <span class="op">&lt;-</span> <span class="va">sfHSD</span></span>
<span><span class="co"># Upper bound spending function parameters, if any</span></span>
<span><span class="va">sfupar</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">4</span></span>
<span><span class="co"># NOTE THAT THE NEXT 2 PARAMETERS ARE NOT NEEDED AS THE</span></span>
<span><span class="co"># LOWER BOUND WAS SPECIFIED IN sfu and sfupar SINCE test.type=2 was specified.</span></span>
<span><span class="co"># Lower bound spending function, if used (test.type &gt; 2)</span></span>
<span><span class="va">sfl</span> <span class="op">&lt;-</span> <span class="va">sfLDOF</span></span>
<span><span class="co"># Lower bound spending function parameters, if any</span></span>
<span><span class="va">sflpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="co"># Assumed hazard ratio under alternate hypothesis</span></span>
<span><span class="va">hr</span> <span class="op">&lt;-</span> <span class="fl">0.6921846</span></span>
<span><span class="co"># Null hypothesis hazard ratio (this is a default; for superiority trials)</span></span>
<span><span class="va">hr0</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="co"># Dropout rate (exponential rate)</span></span>
<span><span class="va">eta</span> <span class="op">&lt;-</span> <span class="fl">0.004</span></span>
<span><span class="co"># Enrollment rate (will be inflated by gsSurv to achieve power)</span></span>
<span><span class="va">gamma</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="co"># Relative enrollment rates by time period</span></span>
<span><span class="va">R</span> <span class="op">&lt;-</span> <span class="fl">0.5</span></span>
<span><span class="co"># Interval durations for piecewise failure rates</span></span>
<span><span class="co"># not needed since there is only 1 rate;</span></span>
<span><span class="co"># last interval always extends indefinitely (to infininity),</span></span>
<span><span class="co"># so it does not need to be specified</span></span>
<span><span class="va">S</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="co"># Calendar time of final analysis</span></span>
<span><span class="cn">T</span> <span class="op">&lt;-</span> <span class="fl">5.5</span></span>
<span><span class="co"># Minimum follow-up time after enrollment complete</span></span>
<span><span class="va">minfup</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="co"># Relative enrollment (experimental/placebo)</span></span>
<span><span class="va">ratio</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="co"># This gets the single control group failure rate</span></span>
<span><span class="co"># (complicated by the fact that the app has to allow piecewise rates)</span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0.01131</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="va">obs</span><span class="op">[</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">obs</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">obs</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">lambdaC</span> <span class="op">&lt;-</span> <span class="va">obs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we plug the above parameters into <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> to generate the design. See comments above for interpretation of the parameters.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv</a></span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="va">k</span>, test.type <span class="op">=</span> <span class="va">test.type</span>, alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span>,</span>
<span>  astar <span class="op">=</span> <span class="va">astar</span>, timing <span class="op">=</span> <span class="va">timing</span>, sfu <span class="op">=</span> <span class="va">sfu</span>, sfupar <span class="op">=</span> <span class="va">sfupar</span>, sfl <span class="op">=</span> <span class="va">sfl</span>,</span>
<span>  sflpar <span class="op">=</span> <span class="va">sflpar</span>, lambdaC <span class="op">=</span> <span class="va">lambdaC</span>, hr <span class="op">=</span> <span class="va">hr</span>, hr0 <span class="op">=</span> <span class="va">hr0</span>, eta <span class="op">=</span> <span class="va">eta</span>,</span>
<span>  gamma <span class="op">=</span> <span class="va">gamma</span>, R <span class="op">=</span> <span class="va">R</span>, S <span class="op">=</span> <span class="va">S</span>, T <span class="op">=</span> <span class="cn">T</span>, minfup <span class="op">=</span> <span class="va">minfup</span>, ratio <span class="op">=</span> <span class="va">ratio</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The reader can see summaries of the above with the following commands which we do not run here:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Textual summary of design</span></span>
<span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Tabular summary of design</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All details are available through the list of items returned; see the help file or try <code>names(x)</code> to see what is available. As examples, we look at the number of events and nominal <span class="math inline">\(p\)</span>-value bounds for the design. Note that the events planned are continuous numbers rather than integers. Parameters have been chosen for the design so that these are very close to but less than whole numbers. This is not required, but can limit misinterpretations.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span><span class="op">$</span><span class="va">n.I</span> <span class="co"># Events at planned analyses</span></span>
<span><span class="co">#&gt; [1] 119.9993 239.9986 319.9981</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here are the nominal 1-sided <span class="math inline">\(p\)</span>-value bounds which could also be seen with the <code>gsBoundSummary(x)</code> command above.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">pnorm</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">bound</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.001623978 0.007976344 0.022198916</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Doubling these 1-sided bounds, we can compare to bounds from <span class="citation" data-cites="AFCAPSdesign">Downs et al. (<a href="references.html#ref-AFCAPSdesign" role="doc-biblioref">1997</a>)</span>: <em>The group sequential boundary (2-sided, <span class="math inline">\(\alpha = 0.05\)</span>) for the scheduled analyses is 2.947, 2.411, and 2.011, which correspond to <span class="math inline">\(p\)</span>-values of 0.0032, 0.0159, and 0.0443, respectively.</em> We see the results are nearly identical.</p>
<p>From <span class="citation" data-cites="AFCAPSresults">Downs et al. (<a href="references.html#ref-AFCAPSresults" role="doc-biblioref">1998</a>)</span>, we have *After an average follow-up of 5.2 years, lovastatin reduced the incidence of first acute major coronary events (183 vs 116 first events; relative risk [RR], 0.63; 95% confidence interval [CI], 0.50-0.79; P&lt;.001).` This was at the second interim analysis. We see immediately that the 299 events were less than the second planned analysis after 332 events. The bounds are easily adapted in the app. We provide the code generated with the design update provided by the app. We assumed the first interim was performed with the planned 240 events. First, we enter the updated event counts.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">n.I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">120</span>, <span class="fl">299</span>, <span class="fl">320</span><span class="op">)</span></span>
<span><span class="va">ku</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">n.I</span><span class="op">)</span></span>
<span><span class="co"># The following are not needed here</span></span>
<span><span class="co"># They just specify the spending time as information fraction based on</span></span>
<span><span class="co"># observed events (integers) divided by final planned number of events</span></span>
<span><span class="co"># from the design (continuous)</span></span>
<span><span class="va">usTime</span> <span class="op">&lt;-</span> <span class="va">n.I</span> <span class="op">/</span> <span class="va">x</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">k</span><span class="op">]</span></span>
<span><span class="va">lsTime</span> <span class="op">&lt;-</span> <span class="va">usTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Based on the above we can update the design. Note that we are now using <code><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign()</a></code> rather than <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> as calendar time is no longer relevant.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign</a></span><span class="op">(</span></span>
<span>  <span class="co"># Updated parameters</span></span>
<span>  k <span class="op">=</span> <span class="va">ku</span>, <span class="co"># Number of analyses</span></span>
<span>  n.I <span class="op">=</span> <span class="va">n.I</span>, <span class="co"># Number of events</span></span>
<span>  <span class="co"># Spending time; you don't really need this if you are just using</span></span>
<span>  <span class="co"># information (event) fraction</span></span>
<span>  usTime <span class="op">=</span> <span class="va">usTime</span>,</span>
<span>  lsTime <span class="op">=</span> <span class="va">lsTime</span>,</span>
<span>  <span class="co"># Remaining parameters from original design</span></span>
<span>  test.type <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">test.type</span>, alpha <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">beta</span>,</span>
<span>  astar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">astar</span>, sfu <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">sf</span>, sfupar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">sf</span>, sflpar <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  <span class="co"># maxn.IPlan is key for update to set max planned information</span></span>
<span>  maxn.IPlan <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">k</span><span class="op">]</span>,</span>
<span>  delta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta</span>, delta1 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta1</span>, delta0 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta0</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To inspect the resulting bounds, we run <code><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary()</a></code> again. Several parameters are useful to get the desired results, as noted in the comments. We note that either the Z or <span class="math inline">\(p\)</span>-value bound is what is needed. For analysis 2, the nominal 1-sided bound 0.0183 has clearly been exceeded by the p &lt; 0.001 reported in the manuscript, confirming statistical significance for the trial. Since we did not know the actual events at interim 1 were not reported, the final bound for the trial may have been slightly different. You can see how much this changes by trying different event counts in the updated design specification in the app.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span></span>
<span>  <span class="va">xu</span>, <span class="co"># Updated design</span></span>
<span>  deltaname <span class="op">=</span> <span class="st">"HR"</span>, <span class="co"># Name of treatment difference measure</span></span>
<span>  logdelta <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># For survival, delta is on a log scale; this transforms</span></span>
<span>  Nname <span class="op">=</span> <span class="st">"Events"</span>, <span class="co"># "N" for analyses is events for survival analysis</span></span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>, <span class="co"># Decimals for numbers in body of table</span></span>
<span>  ddigits <span class="op">=</span> <span class="fl">2</span>, <span class="co"># Decimals for natural parameter; HR in this case</span></span>
<span>  tdigits <span class="op">=</span> <span class="fl">1</span>, <span class="co"># Time digits (not needed here)</span></span>
<span>  <span class="co"># We select key parameters for printing</span></span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"B-value"</span>, <span class="st">"CP"</span>, <span class="st">"CP H1"</span>, <span class="st">"PP"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"P(Cross) if HR="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">hr0</span>, <span class="va">hr</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Updated AFCAPS bounds at IA 2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="aaazmhbrdo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#aaazmhbrdo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#aaazmhbrdo thead, #aaazmhbrdo tbody, #aaazmhbrdo tfoot, #aaazmhbrdo tr, #aaazmhbrdo td, #aaazmhbrdo th {
  border-style: none;
}

#aaazmhbrdo p {
  margin: 0;
  padding: 0;
}

#aaazmhbrdo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aaazmhbrdo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#aaazmhbrdo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aaazmhbrdo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aaazmhbrdo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aaazmhbrdo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaazmhbrdo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aaazmhbrdo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aaazmhbrdo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aaazmhbrdo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aaazmhbrdo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aaazmhbrdo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aaazmhbrdo .gt_spanner_row {
  border-bottom-style: hidden;
}

#aaazmhbrdo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#aaazmhbrdo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aaazmhbrdo .gt_from_md > :first-child {
  margin-top: 0;
}

#aaazmhbrdo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aaazmhbrdo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aaazmhbrdo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#aaazmhbrdo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#aaazmhbrdo .gt_row_group_first td {
  border-top-width: 2px;
}

#aaazmhbrdo .gt_row_group_first th {
  border-top-width: 2px;
}

#aaazmhbrdo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaazmhbrdo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#aaazmhbrdo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#aaazmhbrdo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaazmhbrdo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaazmhbrdo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aaazmhbrdo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#aaazmhbrdo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aaazmhbrdo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aaazmhbrdo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aaazmhbrdo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaazmhbrdo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aaazmhbrdo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#aaazmhbrdo .gt_left {
  text-align: left;
}

#aaazmhbrdo .gt_center {
  text-align: center;
}

#aaazmhbrdo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aaazmhbrdo .gt_font_normal {
  font-weight: normal;
}

#aaazmhbrdo .gt_font_bold {
  font-weight: bold;
}

#aaazmhbrdo .gt_font_italic {
  font-style: italic;
}

#aaazmhbrdo .gt_super {
  font-size: 65%;
}

#aaazmhbrdo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#aaazmhbrdo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#aaazmhbrdo .gt_indent_1 {
  text-indent: 5px;
}

#aaazmhbrdo .gt_indent_2 {
  text-indent: 10px;
}

#aaazmhbrdo .gt_indent_3 {
  text-indent: 15px;
}

#aaazmhbrdo .gt_indent_4 {
  text-indent: 20px;
}

#aaazmhbrdo .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Updated AFCAPS bounds at IA 2</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
<th id="Futility" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Futility</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 38%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.9432</td>
<td class="gt_row gt_right" headers="Futility">-2.9432</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 120</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0016</td>
<td class="gt_row gt_right" headers="Futility">0.0016</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.5843</td>
<td class="gt_row gt_right" headers="Futility">1.7115</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.0016</td>
<td class="gt_row gt_right" headers="Futility">0.0016</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 2: 93%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.0908</td>
<td class="gt_row gt_right" headers="Futility">-2.0908</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 299</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0183</td>
<td class="gt_row gt_right" headers="Futility">0.0183</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.7852</td>
<td class="gt_row gt_right" headers="Futility">1.2736</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.0175</td>
<td class="gt_row gt_right" headers="Futility">0.0175</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.0451</td>
<td class="gt_row gt_right" headers="Futility">-2.0451</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 320</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0204</td>
<td class="gt_row gt_right" headers="Futility">0.0204</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.7956</td>
<td class="gt_row gt_right" headers="Futility">1.2569</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.0059</td>
<td class="gt_row gt_right" headers="Futility">0.0059</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</section><section id="cardiovascular-outcomes-non-inferiority" class="level2" data-number="2.4"><h2 data-number="2.4" class="anchored" data-anchor-id="cardiovascular-outcomes-non-inferiority">
<span class="header-section-number">2.4</span> Cardiovascular outcomes non-inferiority</h2>
<p>The EXAMINE trial <span class="citation" data-cites="EXAMINEresults">(<a href="references.html#ref-EXAMINEresults" role="doc-biblioref">White et al. 2013</a>)</span> established non-inferiority for major cardiovascular outcomes (MACE) for the treatment of diabetes using the DPP4 inhibitor alogliptin compared to placebo. The design was described in <span class="citation" data-cites="EXAMINEdesign">White et al. (<a href="references.html#ref-EXAMINEdesign" role="doc-biblioref">2011</a>)</span>. We approximate the design and primary analysis evaluation here. Software and some assumptions of the model were not completely clear, so this is not an exact reproduction of <span class="citation" data-cites="AFCAPSdesign">Downs et al. (<a href="references.html#ref-AFCAPSdesign" role="doc-biblioref">1997</a>)</span>, but is very close. Key assumptions we replicate here:</p>
<ul>
<li>The primary analysis evaluates treatment effect using a Cox proportional hazards model of the primary endpoint MACE stratified by geographic region and screening renal function.
<ul>
<li>1-sided repeated confidence interval for HR at each analysis.</li>
<li>Focus on analysis to rule out HR <span class="math inline">\(\ge 1.3\)</span>, but also a test for superiority.</li>
<li>Analyses planned after 550, 600, 650 MACE events.</li>
<li>O’Brien-Fleming-like spending function <span class="citation" data-cites="LanDeMets">Lan and DeMets (<a href="references.html#ref-LanDeMets" role="doc-biblioref">1983</a>)</span>.</li>
<li>2.5% Type I error.</li>
<li>Approximately 91% power.</li>
<li>3.5% annual MACE event rate.</li>
<li>Uniform enrollment over 2 years.</li>
<li>4.75 years trial duration.</li>
<li>1% annual loss-to-follow-up rate.</li>
<li>Software: EAST 5 (Cytel).</li>
</ul>
</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">EXAMINEdesign</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv</a></span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Number of analyses</span></span>
<span>  test.type <span class="op">=</span> <span class="fl">1</span>, <span class="co"># 1-sided testing</span></span>
<span>  timing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">550</span>, <span class="fl">600</span><span class="op">)</span> <span class="op">/</span> <span class="fl">650</span>, <span class="co"># Event fractions at interim analyses</span></span>
<span>  beta <span class="op">=</span> <span class="fl">1</span> <span class="op">-</span> <span class="fl">0.90658</span>, <span class="co"># Type II error (1 - power)</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">.025</span>, <span class="co"># 1-sided Type I error</span></span>
<span>  lambdaC <span class="op">=</span> <span class="fl">.035</span>, <span class="co"># Exponential failure rate</span></span>
<span>  eta <span class="op">=</span> <span class="fl">.0108</span>, <span class="co"># Exponential dropout rate</span></span>
<span>  sfu <span class="op">=</span> <span class="va">sfLDOF</span>, <span class="co"># O'Brien-Fleming-like spending</span></span>
<span>  hr0 <span class="op">=</span> <span class="fl">1.3</span>, <span class="co"># Non-inferiority margin</span></span>
<span>  hr <span class="op">=</span> <span class="fl">1</span>, <span class="co"># Alternate hypothesis is equal risk</span></span>
<span>  T <span class="op">=</span> <span class="fl">4.75</span>, <span class="co"># Calendar time of final analysis</span></span>
<span>  minfup <span class="op">=</span> <span class="fl">2.75</span> <span class="co"># Minimum follow-up time after enrollment complete</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="va">EXAMINEdesign</span>, digits <span class="op">=</span> <span class="fl">4</span>, ddigits <span class="op">=</span> <span class="fl">2</span>, tdigits <span class="op">=</span> <span class="fl">2</span>, timename <span class="op">=</span> <span class="st">"Year"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"EXAMINE non-inferiority design bounds"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="zkscdcdpqe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zkscdcdpqe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zkscdcdpqe thead, #zkscdcdpqe tbody, #zkscdcdpqe tfoot, #zkscdcdpqe tr, #zkscdcdpqe td, #zkscdcdpqe th {
  border-style: none;
}

#zkscdcdpqe p {
  margin: 0;
  padding: 0;
}

#zkscdcdpqe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zkscdcdpqe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zkscdcdpqe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zkscdcdpqe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zkscdcdpqe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zkscdcdpqe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zkscdcdpqe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zkscdcdpqe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zkscdcdpqe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zkscdcdpqe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zkscdcdpqe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zkscdcdpqe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zkscdcdpqe .gt_spanner_row {
  border-bottom-style: hidden;
}

#zkscdcdpqe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zkscdcdpqe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zkscdcdpqe .gt_from_md > :first-child {
  margin-top: 0;
}

#zkscdcdpqe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zkscdcdpqe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zkscdcdpqe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zkscdcdpqe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zkscdcdpqe .gt_row_group_first td {
  border-top-width: 2px;
}

#zkscdcdpqe .gt_row_group_first th {
  border-top-width: 2px;
}

#zkscdcdpqe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zkscdcdpqe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zkscdcdpqe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zkscdcdpqe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zkscdcdpqe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zkscdcdpqe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zkscdcdpqe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zkscdcdpqe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zkscdcdpqe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zkscdcdpqe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zkscdcdpqe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zkscdcdpqe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zkscdcdpqe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zkscdcdpqe .gt_left {
  text-align: left;
}

#zkscdcdpqe .gt_center {
  text-align: center;
}

#zkscdcdpqe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zkscdcdpqe .gt_font_normal {
  font-weight: normal;
}

#zkscdcdpqe .gt_font_bold {
  font-weight: bold;
}

#zkscdcdpqe .gt_font_italic {
  font-style: italic;
}

#zkscdcdpqe .gt_super {
  font-size: 65%;
}

#zkscdcdpqe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zkscdcdpqe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zkscdcdpqe .gt_indent_1 {
  text-indent: 5px;
}

#zkscdcdpqe .gt_indent_2 {
  text-indent: 10px;
}

#zkscdcdpqe .gt_indent_3 {
  text-indent: 15px;
}

#zkscdcdpqe .gt_indent_4 {
  text-indent: 20px;
}

#zkscdcdpqe .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">EXAMINE non-inferiority design bounds</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 85%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.1748</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 5400</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0148</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 550</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">1.0799</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Year: 4.13</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1.3</td>
<td class="gt_row gt_right" headers="Efficacy">0.0148</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.8124</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">IA 2: 92%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.1535</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">N: 5400</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0156</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 600</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">1.0904</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Year: 4.44</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1.3</td>
<td class="gt_row gt_right" headers="Efficacy">0.0197</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.8654</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.0815</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 5400</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0187</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 650</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">1.1041</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Year: 4.75</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1.3</td>
<td class="gt_row gt_right" headers="Efficacy">0.0250</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.9066</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>Following is a plot of expected accrual of subjects and events over time under design assumptions for the alternate hypothesis. You may choose to ignore the code until you need to do a plot like this.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">accrual_fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">Time</span>, <span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">xx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">nEventsIA</a></span><span class="op">(</span>tIA <span class="op">=</span> <span class="va">Time</span>, x <span class="op">=</span> <span class="va">x</span>, simple <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>    Time <span class="op">=</span> <span class="va">Time</span>,</span>
<span>    Accrual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">xx</span><span class="op">$</span><span class="va">eNC</span> <span class="op">+</span> <span class="va">xx</span><span class="op">$</span><span class="va">eNE</span>, <span class="va">xx</span><span class="op">$</span><span class="va">eDC</span> <span class="op">+</span> <span class="va">xx</span><span class="op">$</span><span class="va">eDE</span><span class="op">)</span>,</span>
<span>    Count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sample size"</span>, <span class="st">"Events"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">accrual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Time <span class="op">=</span> <span class="fl">0</span>, Accrual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, Count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sample size"</span>, <span class="st">"Events"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">xtime</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">50</span><span class="op">)</span> <span class="op">/</span> <span class="fl">50</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">EXAMINEdesign</span><span class="op">$</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">xtime</span><span class="op">[</span><span class="va">xtime</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">accrual</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">accrual</span>, <span class="fu">accrual_fn</span><span class="op">(</span>Time <span class="op">=</span> <span class="va">xtime</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span>, x <span class="op">=</span> <span class="va">EXAMINEdesign</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">accrual</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Time</span>, y <span class="op">=</span> <span class="va">Accrual</span>, col <span class="op">=</span> <span class="va">Count</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Expected Accrual"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Expected accrual of enrollment and events for EXAMINE trial"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="proportional-hazards_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>Findings for the trial: <em>the primary end point occurred at similar rates in the alogliptin and placebo groups (in 11.3% and 11.8% of patients, respectively, after a median exposure of 18 months; hazard ratio, 0.96; upper boundary of the one-sided repeated CI, 1.16; P&lt;0.001 for noninferiority</em> <span class="citation" data-cites="EXAMINEresults">(<a href="references.html#ref-EXAMINEresults" role="doc-biblioref">White et al. 2013</a>)</span>. This was the first interim for testing the non-inferiority hypothesis to rule out an excess risk with HR=1.3. This analysis was performed with 621 events rather than the planned 550. Such an overrun is not atypical when setting a database cutoff prior to final data cleanup and (blinded) endpoint review. In any case, here is the updated design. We enter the events at the interim analysis for the trial. Since <code><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign()</a></code> requires at least 2 analyses, we also provide the final analysis planned event count even though that was not needed at the time of the interim analysis and could be updated at the time of the final analysis, if needed.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">n.I</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">621</span>, <span class="fl">650</span><span class="op">)</span></span>
<span><span class="va">ku</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">n.I</span><span class="op">)</span></span>
<span><span class="co"># This is just specifying event fraction vs final planned</span></span>
<span><span class="co"># is used for computing spending.</span></span>
<span><span class="co"># If calendar spending were specified, calendar fraction</span></span>
<span><span class="co"># would be used here.</span></span>
<span><span class="va">usTime</span> <span class="op">&lt;-</span> <span class="va">n.I</span> <span class="op">/</span> <span class="va">EXAMINEdesign</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">k</span><span class="op">]</span></span>
<span><span class="va">lsTime</span> <span class="op">&lt;-</span> <span class="va">usTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we incorporate this to update the original design. As in previous examples, most of the arguments are copied from the original design and we use <code><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign()</a></code> to update rather than <code><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv()</a></code> which was used for the original design.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">EXAMINEdesign</span></span>
<span><span class="va">xu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign</a></span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="va">ku</span>,</span>
<span>  test.type <span class="op">=</span> <span class="va">test.type</span>,</span>
<span>  alpha <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">alpha</span>,</span>
<span>  beta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">beta</span>,</span>
<span>  astar <span class="op">=</span> <span class="va">astar</span>,</span>
<span>  timing <span class="op">=</span> <span class="va">timing</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">sfu</span>,</span>
<span>  sfupar <span class="op">=</span> <span class="va">sfupar</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">sfl</span>,</span>
<span>  sflpar <span class="op">=</span> <span class="va">sflpar</span>,</span>
<span>  n.I <span class="op">=</span> <span class="va">n.I</span>,</span>
<span>  maxn.IPlan <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">x</span><span class="op">$</span><span class="va">k</span><span class="op">]</span>,</span>
<span>  delta <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta</span>,</span>
<span>  delta1 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta1</span>,</span>
<span>  delta0 <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">delta0</span>,</span>
<span>  usTime <span class="op">=</span> <span class="va">usTime</span>,</span>
<span>  lsTime <span class="op">=</span> <span class="va">lsTime</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we document the updated bounds. The first code line here is needed for any case where <code>hr0 != 1</code>; i.e.&nbsp;for non-inferiority trials or, in the case of vaccines, super-superiority trials.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># The first line is required to make gsBoundSummary to work correctly</span></span>
<span><span class="co"># for non-inferiority and super-superiority trials</span></span>
<span><span class="va">xu</span><span class="op">$</span><span class="va">hr0</span> <span class="op">&lt;-</span> <span class="va">EXAMINEdesign</span><span class="op">$</span><span class="va">hr0</span></span>
<span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span></span>
<span>  <span class="va">xu</span>,</span>
<span>  deltaname <span class="op">=</span> <span class="st">"HR"</span>,</span>
<span>  logdelta <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  Nname <span class="op">=</span> <span class="st">"Events"</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  ddigits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  tdigits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"B-value"</span>, <span class="st">"CP"</span>, <span class="st">"CP H1"</span>, <span class="st">"PP"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"EXAMINE trial design"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Update at time of analysis"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="zklrgmdiqj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zklrgmdiqj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zklrgmdiqj thead, #zklrgmdiqj tbody, #zklrgmdiqj tfoot, #zklrgmdiqj tr, #zklrgmdiqj td, #zklrgmdiqj th {
  border-style: none;
}

#zklrgmdiqj p {
  margin: 0;
  padding: 0;
}

#zklrgmdiqj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zklrgmdiqj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zklrgmdiqj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zklrgmdiqj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zklrgmdiqj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zklrgmdiqj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zklrgmdiqj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zklrgmdiqj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zklrgmdiqj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zklrgmdiqj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zklrgmdiqj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zklrgmdiqj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zklrgmdiqj .gt_spanner_row {
  border-bottom-style: hidden;
}

#zklrgmdiqj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zklrgmdiqj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zklrgmdiqj .gt_from_md > :first-child {
  margin-top: 0;
}

#zklrgmdiqj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zklrgmdiqj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zklrgmdiqj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zklrgmdiqj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zklrgmdiqj .gt_row_group_first td {
  border-top-width: 2px;
}

#zklrgmdiqj .gt_row_group_first th {
  border-top-width: 2px;
}

#zklrgmdiqj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zklrgmdiqj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zklrgmdiqj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zklrgmdiqj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zklrgmdiqj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zklrgmdiqj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zklrgmdiqj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zklrgmdiqj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zklrgmdiqj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zklrgmdiqj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zklrgmdiqj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zklrgmdiqj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zklrgmdiqj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zklrgmdiqj .gt_left {
  text-align: left;
}

#zklrgmdiqj .gt_center {
  text-align: center;
}

#zklrgmdiqj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zklrgmdiqj .gt_font_normal {
  font-weight: normal;
}

#zklrgmdiqj .gt_font_bold {
  font-weight: bold;
}

#zklrgmdiqj .gt_font_italic {
  font-style: italic;
}

#zklrgmdiqj .gt_super {
  font-size: 65%;
}

#zklrgmdiqj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zklrgmdiqj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zklrgmdiqj .gt_indent_1 {
  text-indent: 5px;
}

#zklrgmdiqj .gt_indent_2 {
  text-indent: 10px;
}

#zklrgmdiqj .gt_indent_3 {
  text-indent: 15px;
}

#zklrgmdiqj .gt_indent_4 {
  text-indent: 20px;
}

#zklrgmdiqj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">EXAMINE trial design</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Update at time of analysis</th>
</tr>
<tr class="header gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
<th id="Futility" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Futility</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 96%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.0367</td>
<td class="gt_row gt_right" headers="Futility">-2.0367</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 621</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0208</td>
<td class="gt_row gt_right" headers="Futility">0.0208</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">1.1040</td>
<td class="gt_row gt_right" headers="Futility">1.5309</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.0208</td>
<td class="gt_row gt_right" headers="Futility">0.0208</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1.3</td>
<td class="gt_row gt_right" headers="Efficacy">0.0208</td>
<td class="gt_row gt_right" headers="Futility">0.0208</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.8881</td>
<td class="gt_row gt_right" headers="Futility">0.0000</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.0389</td>
<td class="gt_row gt_right" headers="Futility">-2.0389</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 650</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0207</td>
<td class="gt_row gt_right" headers="Futility">0.0207</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">1.1079</td>
<td class="gt_row gt_right" headers="Futility">1.5255</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.0042</td>
<td class="gt_row gt_right" headers="Futility">0.0042</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1.3</td>
<td class="gt_row gt_right" headers="Efficacy">0.0250</td>
<td class="gt_row gt_right" headers="Futility">0.0250</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.9111</td>
<td class="gt_row gt_right" headers="Futility">0.0000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<section id="exercise" class="level3" data-number="2.4.1"><h3 data-number="2.4.1" class="anchored" data-anchor-id="exercise">
<span class="header-section-number">2.4.1</span> Exercise</h3>
<p>See the following link for the Moderna COVID-19 design replication: <a href="https://medium.com/@yipeng_39244/reverse-engineering-the-statistical-analyses-in-the-moderna-protocol-2c9fd7544326" class="uri">https://medium.com/@yipeng_39244/reverse-engineering-the-statistical-analyses-in-the-moderna-protocol-2c9fd7544326</a></p>
<p>Can you reproduce this using the Shiny interface?</p>
</section></section><section id="sec-poisson-mixture" class="level2" data-number="2.5"><h2 data-number="2.5" class="anchored" data-anchor-id="sec-poisson-mixture">
<span class="header-section-number">2.5</span> Cure model</h2>
<p>We consider a Poisson mixture model <span class="citation" data-cites="deCastroGAMLSS">De Castro, Cancho, and Rodrigues (<a href="references.html#ref-deCastroGAMLSS" role="doc-biblioref">2010</a>)</span> which has also been referred to as a transformation cure model <span class="citation" data-cites="Zhang2018">Zhang and Shao (<a href="references.html#ref-Zhang2018" role="doc-biblioref">2018</a>)</span> or promotion time cure model <span class="citation" data-cites="Zeng2006">Zeng, Yin, and Ibrahim (<a href="references.html#ref-Zeng2006" role="doc-biblioref">2006</a>)</span>. This model can be useful to approximate event accrual in a trial where there is a substantial portion of patients who are expected to have good long-term result. Example applications used to estimate long-term survival are provided by in <span class="citation" data-cites="hellmann2017estimating">Hellmann et al. (<a href="references.html#ref-hellmann2017estimating" role="doc-biblioref">2017</a>)</span> as well as <span class="citation" data-cites="deCastroGAMLSS">De Castro, Cancho, and Rodrigues (<a href="references.html#ref-deCastroGAMLSS" role="doc-biblioref">2010</a>)</span>. Because of the nature and uncertainty of the event accumulation, we choose to implement with calendar-based spending <span class="citation" data-cites="LanDeMets1989">Lan and DeMets (<a href="references.html#ref-LanDeMets1989" role="doc-biblioref">1989</a>)</span>. This is a choice that would need to be carefully evaluated. Part of the suggested rationale is that the trial needs to be completed in a certain timeframe and the event distribution in the range described over the course of the planned survival distribution should be adequate, and the extreme long-term proportional hazards assumption may be less safe than over a shorter window.</p>
<p>Much simpler models such as a 2- or 3-piece piecewise exponential model could be equally effective for a design of this nature, so this is just one example of an approach to a situation of this nature. This is our longest example; a simpler version of this is demonstrated in the app. Readers not immediately interested in the approach can simply skip the rest of this chapter.</p>
<section id="cure-model-parameters" class="level3" data-number="2.5.1"><h3 data-number="2.5.1" class="anchored" data-anchor-id="cure-model-parameters">
<span class="header-section-number">2.5.1</span> Cure model parameters</h3>
<p>The basic Poisson mixture cure model we consider takes the form</p>
<p><span class="math display">\[S(t)= \exp(-\theta (1 - \exp(-\lambda t)).\]</span></p>
<p>We note that:</p>
<ul>
<li>
<span class="math inline">\(1-\exp(-\lambda t)\)</span> is the cumulative distribution function for an exponential distribution and can be replaced by an arbitrary continuous cumulative distribution function.</li>
<li>As <span class="math inline">\(t\)</span> approaches <span class="math inline">\(\infty\)</span>, <span class="math inline">\(S(t)\)</span> approaches <span class="math inline">\(\exp(-\theta)\)</span> which will be referred to as the cure rate.</li>
</ul>
<p>Generally, this can be useful when historical data for a proposed group suggests a plateau in survival after some time. The parameter <span class="math inline">\(\lambda\)</span> above can be used to determine how quickly events occur, basically setting the <em>bend</em> in the survival curve. For instance, we assume here that historical data suggests a plateau of 0.7 event-free survival for some indication such as adjuvant or neoadjuvant treatment of some cancer. We assume further that by 18 months, the event-free survival is already 0.75. Using the Poisson mixture cure model above, we can back-calculate the parameters as:</p>
<p><span class="math display">\[\theta = -\log(0.7)\]</span> <span class="math display">\[\lambda = -\log(1 + \log(0.75) / \theta) / 18.\]</span></p>
<p>For a proportional hazards model with hazard ratio <span class="math inline">\(HR\)</span> we can assume control survival <span class="math inline">\(S_C(t)=S(t)\)</span> as above and experimental survival of <span class="math inline">\(S_E(t)=S_C(t)^{HR}\)</span>. Assuming <span class="math inline">\(HR=0.72\)</span> we plot assumed survival through 48 months for each treatment group.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Assumed long-term survival rate</span></span>
<span><span class="va">cureRate</span> <span class="op">&lt;-</span> <span class="fl">0.7</span></span>
<span><span class="co"># Survival rate at specific time</span></span>
<span><span class="va">survRate</span> <span class="op">&lt;-</span> <span class="fl">0.75</span></span>
<span><span class="va">survRateTime</span> <span class="op">&lt;-</span> <span class="fl">18</span></span>
<span><span class="co"># Maximum time for plot and study duration</span></span>
<span><span class="va">maxTime</span> <span class="op">&lt;-</span> <span class="fl">60</span></span>
<span><span class="co"># Assumed hazard ratio to power trial</span></span>
<span><span class="va">hr</span> <span class="op">&lt;-</span> <span class="fl">0.72</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we translate the above inputs into the parameters in the Poison mixture model for the control group.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Compute theta for Poisson mixture cure rate model</span></span>
<span><span class="va">theta</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">cureRate</span><span class="op">)</span></span>
<span><span class="co"># Compute rate parameter lambda for Poisson mixture cure rate model</span></span>
<span><span class="va">lambda</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">survRate</span><span class="op">)</span> <span class="op">/</span> <span class="va">theta</span><span class="op">)</span> <span class="op">/</span> <span class="va">survRateTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we plot assumed survival curves under the model parameters over the targeted time period specified above. We use a fairly refined grid to ensure the plot is smooth.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">Month</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="va">maxTime</span></span>
<span><span class="co"># Control survival</span></span>
<span><span class="va">S</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">theta</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">lambda</span> <span class="op">*</span> <span class="va">Month</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Experimental survival</span></span>
<span><span class="va">S_E</span> <span class="op">&lt;-</span> <span class="va">S</span><span class="op">^</span><span class="va">hr</span></span>
<span><span class="co"># Put in a data frame and plot</span></span>
<span><span class="va">cure_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="st">"Control"</span>, Month <span class="op">=</span> <span class="va">Month</span>, Survival <span class="op">=</span> <span class="va">S</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Treatment <span class="op">=</span> <span class="st">"Experimental"</span>, Month <span class="op">=</span> <span class="va">Month</span>, Survival <span class="op">=</span> <span class="va">S_E</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">cure_model</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Month</span>, y <span class="op">=</span> <span class="va">Survival</span>, col <span class="op">=</span> <span class="va">Treatment</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">maxTime</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">.6</span>, <span class="fl">1</span>, <span class="fl">.1</span><span class="op">)</span>, limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.6</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="proportional-hazards_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>To perform asymptotic calculations we approximate the survival rates in the above matrix with piecewise constant hazard rates that match the survival rates just computed at discrete points above. Since the cumulative hazard <span class="math inline">\(H(t)= - \log(S(t))\)</span> and <span class="math inline">\(H(t)=\int_0^t h(s)ds\)</span> where <span class="math inline">\(h()\)</span> is the hazard rate, we approximate with <span class="math display">\[\tilde h(t)=(H(t_m)-H(t_{m-1}))/(t_m - t_{m-1}), m=1,\ldots,M.\]</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cure_model</span> <span class="op">&lt;-</span> <span class="va">cure_model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    H <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">Survival</span><span class="op">)</span>,</span>
<span>    duration <span class="op">=</span> <span class="va">Month</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span><span class="op">(</span><span class="va">Month</span>, default <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    h <span class="op">=</span> <span class="op">(</span><span class="va">H</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">lag</a></span><span class="op">(</span><span class="va">H</span>, default <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">/</span> <span class="va">duration</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="expected-event-accumulation-over-time" class="level3" data-number="2.5.2"><h3 data-number="2.5.2" class="anchored" data-anchor-id="expected-event-accumulation-over-time">
<span class="header-section-number">2.5.2</span> Expected event accumulation over time</h3>
<p>Event accumulation over time can be very sensitive to many trial design assumptions. Generally, we are trying to mimic a slowing of event accumulation over time. We assume the following for relative enrollment rates end enrollment duration.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Relative enrollment rates</span></span>
<span><span class="va">enrollRates</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span></span>
<span><span class="co"># Total duration for each enrollment rate</span></span>
<span><span class="co"># Here they total 18 months planned to complete enrollment</span></span>
<span><span class="va">enrollDurations</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">12</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We plot the event accumulation in the above scenario by calendar time post study initiation. We then overlay the percent of final events at 1, 2, 3, 4, 5 and 6 years start of study.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calendar times</span></span>
<span><span class="va">ti</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">maxTime</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># maxTime is study duration from above</span></span>
<span><span class="co"># Placeholder for expected event counts</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="va">ti</span></span>
<span></span>
<span><span class="co"># Begin with putting parameters into a design with no interim analysis</span></span>
<span><span class="co"># This will enable calculation of expected event accumulation</span></span>
<span><span class="va">xx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">nSurv</a></span><span class="op">(</span></span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>, <span class="co"># 1-sided Type I error</span></span>
<span>  beta <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># Here we will NOT compute sample size</span></span>
<span>  <span class="co"># Control group exponential failure rate to get median OS of 13 months</span></span>
<span>  lambdaC <span class="op">=</span> <span class="va">cure_model</span><span class="op">$</span><span class="va">h</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>  <span class="co"># Time period durations for cure model; length 1 less than lambdaC</span></span>
<span>  S <span class="op">=</span> <span class="va">cure_model</span><span class="op">$</span><span class="va">duration</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cure_model</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,</span>
<span>  <span class="co"># Alternate hypothesis hazard ratio</span></span>
<span>  hr <span class="op">=</span> <span class="va">hr</span>,</span>
<span>  <span class="co"># Dropout rate per month (exponential rate)</span></span>
<span>  eta <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>  <span class="co"># Enrollment rates during ramp-up period</span></span>
<span>  gamma <span class="op">=</span> <span class="va">enrollRates</span>,</span>
<span>  <span class="co"># Relative enrollment rate time period durations</span></span>
<span>  R <span class="op">=</span> <span class="va">enrollDurations</span>,</span>
<span>  <span class="co"># Calendar time of final analysis</span></span>
<span>  T <span class="op">=</span> <span class="va">maxTime</span>,</span>
<span>  <span class="co"># Minimum follow-up time after enrollment complete</span></span>
<span>  minfup <span class="op">=</span> <span class="va">maxTime</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">enrollDurations</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we can compute the expected accrual of events over time relative to complete event accrual at the end of the study. This actual number of events and sample size will increase proportionately as long as the relative enrollment rates and durations remain unchanged.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="va">ti</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">n</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">nEventsIA</a></span><span class="op">(</span>tIA <span class="op">=</span> <span class="va">ti</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span>, x <span class="op">=</span> <span class="va">xx</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># Now do a line plot of % of final events by month</span></span>
<span><span class="va">ev</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Month <span class="op">=</span> <span class="va">ti</span>, ev <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">ev</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Month</span>, y <span class="op">=</span> <span class="va">ev</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"% of Final Events"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Study Time"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">maxTime</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Add text overlay at targeted analysis times</span></span>
<span><span class="va">subti</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">18</span>, <span class="fl">24</span>, <span class="fl">36</span>, <span class="fl">48</span>, <span class="fl">60</span><span class="op">)</span></span>
<span><span class="va">subpct</span> <span class="op">&lt;-</span> <span class="va">n</span><span class="op">[</span><span class="va">subti</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="va">n</span><span class="op">[</span><span class="va">maxTime</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="fl">100</span></span>
<span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Month <span class="op">=</span> <span class="va">subti</span>, ev <span class="op">=</span> <span class="va">subpct</span>, txt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">subpct</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="st">"%"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_label</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">txt</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Month</span>, y <span class="op">=</span> <span class="va">ev</span>, label <span class="op">=</span> <span class="va">txt</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="proportional-hazards_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>We note that we will use calendar time as above for spending:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Spending fraction at interim analyses</span></span>
<span><span class="va">usTime</span> <span class="op">&lt;-</span> <span class="va">subti</span> <span class="op">/</span> <span class="va">maxTime</span></span>
<span><span class="co"># Information fraction is required for gsSurv input</span></span>
<span><span class="co"># This was computed above</span></span>
<span><span class="va">timing</span> <span class="op">&lt;-</span> <span class="va">n</span><span class="op">[</span><span class="va">subti</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="va">n</span><span class="op">[</span><span class="va">maxTime</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="the-design" class="level3" data-number="2.5.3"><h3 data-number="2.5.3" class="anchored" data-anchor-id="the-design">
<span class="header-section-number">2.5.3</span> The design</h3>
<p>Now we design the trial with both efficacy and futility bounds determined with calendar spending.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cure_model_design</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/nSurv.html">gsSurv</a></span><span class="op">(</span></span>
<span>    k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">timing</span><span class="op">)</span>, <span class="co"># Specify number of analyses</span></span>
<span>    alpha <span class="op">=</span> <span class="fl">0.025</span>, <span class="co"># 1-sided Type I error</span></span>
<span>    beta <span class="op">=</span> <span class="fl">.1</span>, <span class="co"># 1 - .1 = .9 or 90% power</span></span>
<span>    <span class="co"># Control group exponential failure rate to get median OS of 13 months</span></span>
<span>    lambdaC <span class="op">=</span> <span class="va">cure_model</span><span class="op">$</span><span class="va">h</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>    <span class="co"># Time period durations for cure model; length 1 less than lambdaC</span></span>
<span>    S <span class="op">=</span> <span class="va">cure_model</span><span class="op">$</span><span class="va">duration</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">cure_model</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,</span>
<span>    <span class="co"># Alternate hypothesis hazard ratio</span></span>
<span>    hr <span class="op">=</span> <span class="va">hr</span>,</span>
<span>    <span class="co"># Dropout rate per month (exponential rate)</span></span>
<span>    eta <span class="op">=</span> <span class="fl">0.001</span>,</span>
<span>    <span class="co"># Enrollment rates during ramp-up period</span></span>
<span>    gamma <span class="op">=</span> <span class="va">enrollRates</span>,</span>
<span>    <span class="co"># Relative enrollment rate time period durations</span></span>
<span>    R <span class="op">=</span> <span class="va">enrollDurations</span>,</span>
<span>    <span class="co"># Calendar time of final analysis</span></span>
<span>    T <span class="op">=</span> <span class="va">maxTime</span>,</span>
<span>    <span class="co"># Minimum follow-up time after enrollment complete</span></span>
<span>    minfup <span class="op">=</span> <span class="va">maxTime</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">enrollDurations</span><span class="op">)</span>,</span>
<span>    timing <span class="op">=</span> <span class="va">timing</span>, <span class="co"># Information fraction from above</span></span>
<span>    usTime <span class="op">=</span> <span class="va">usTime</span>, <span class="co"># Calendar time fraction of analyses from above</span></span>
<span>    lsTime <span class="op">=</span> <span class="va">usTime</span>,</span>
<span>    <span class="co"># Efficacy spending</span></span>
<span>    <span class="co"># Lan-DeMets spending function to approximate O'Brien-Fleming design</span></span>
<span>    sfu <span class="op">=</span> <span class="va">sfLDOF</span>,</span>
<span>    <span class="co"># Futility spending</span></span>
<span>    sfl <span class="op">=</span> <span class="va">sfHSD</span>, <span class="co"># Hwang-Shih-DeCani (HSD) spending</span></span>
<span>    sflpar <span class="op">=</span> <span class="op">-</span><span class="fl">8</span>, <span class="co"># Spending function parameter can be adjusted to get appropriate bound</span></span>
<span>    <span class="co"># Specify non-binding futility bounds</span></span>
<span>    test.type <span class="op">=</span> <span class="fl">4</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">cure_model_design</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Calendar-based spending"</span>, subtitle <span class="op">=</span> <span class="st">"Design with cure model"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="qpanygjyvq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qpanygjyvq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qpanygjyvq thead, #qpanygjyvq tbody, #qpanygjyvq tfoot, #qpanygjyvq tr, #qpanygjyvq td, #qpanygjyvq th {
  border-style: none;
}

#qpanygjyvq p {
  margin: 0;
  padding: 0;
}

#qpanygjyvq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qpanygjyvq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qpanygjyvq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qpanygjyvq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qpanygjyvq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qpanygjyvq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qpanygjyvq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qpanygjyvq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qpanygjyvq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qpanygjyvq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qpanygjyvq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qpanygjyvq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qpanygjyvq .gt_spanner_row {
  border-bottom-style: hidden;
}

#qpanygjyvq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qpanygjyvq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qpanygjyvq .gt_from_md > :first-child {
  margin-top: 0;
}

#qpanygjyvq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qpanygjyvq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qpanygjyvq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qpanygjyvq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qpanygjyvq .gt_row_group_first td {
  border-top-width: 2px;
}

#qpanygjyvq .gt_row_group_first th {
  border-top-width: 2px;
}

#qpanygjyvq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qpanygjyvq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qpanygjyvq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qpanygjyvq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qpanygjyvq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qpanygjyvq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qpanygjyvq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qpanygjyvq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qpanygjyvq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qpanygjyvq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qpanygjyvq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qpanygjyvq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qpanygjyvq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qpanygjyvq .gt_left {
  text-align: left;
}

#qpanygjyvq .gt_center {
  text-align: center;
}

#qpanygjyvq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qpanygjyvq .gt_font_normal {
  font-weight: normal;
}

#qpanygjyvq .gt_font_bold {
  font-weight: bold;
}

#qpanygjyvq .gt_font_italic {
  font-style: italic;
}

#qpanygjyvq .gt_super {
  font-size: 65%;
}

#qpanygjyvq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qpanygjyvq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qpanygjyvq .gt_indent_1 {
  text-indent: 5px;
}

#qpanygjyvq .gt_indent_2 {
  text-indent: 10px;
}

#qpanygjyvq .gt_indent_3 {
  text-indent: 15px;
}

#qpanygjyvq .gt_indent_4 {
  text-indent: 20px;
}

#qpanygjyvq .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">Calendar-based spending</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Design with cure model</th>
</tr>
<tr class="header gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
<th id="Futility" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Futility</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 22%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">4.8769</td>
<td class="gt_row gt_right" headers="Futility">-2.1306</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 912</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0000</td>
<td class="gt_row gt_right" headers="Futility">0.9834</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 86</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.3487</td>
<td class="gt_row gt_right" headers="Futility">1.5844</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Month: 12</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0000</td>
<td class="gt_row gt_right" headers="Futility">0.0166</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.0004</td>
<td class="gt_row gt_right" headers="Futility">0.0001</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">IA 2: 50%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">3.9309</td>
<td class="gt_row gt_right" headers="Futility">-1.2291</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">N: 1520</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0000</td>
<td class="gt_row gt_right" headers="Futility">0.8905</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 196</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.5696</td>
<td class="gt_row gt_right" headers="Futility">1.1924</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Month: 18</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0000</td>
<td class="gt_row gt_right" headers="Futility">0.1144</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.0502</td>
<td class="gt_row gt_right" headers="Futility">0.0003</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 3: 73%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">3.3710</td>
<td class="gt_row gt_right" headers="Futility">-0.4999</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 1520</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0004</td>
<td class="gt_row gt_right" headers="Futility">0.6914</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 286</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.6709</td>
<td class="gt_row gt_right" headers="Futility">1.0610</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Month: 24</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0004</td>
<td class="gt_row gt_right" headers="Futility">0.3190</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.2746</td>
<td class="gt_row gt_right" headers="Futility">0.0008</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">IA 4: 92%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.6740</td>
<td class="gt_row gt_right" headers="Futility">0.4372</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">N: 1520</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0037</td>
<td class="gt_row gt_right" headers="Futility">0.3310</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 361</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.7545</td>
<td class="gt_row gt_right" headers="Futility">0.9550</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Month: 36</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0038</td>
<td class="gt_row gt_right" headers="Futility">0.6720</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.6696</td>
<td class="gt_row gt_right" headers="Futility">0.0040</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 5: 98%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.2540</td>
<td class="gt_row gt_right" headers="Futility">1.1568</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">N: 1520</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0121</td>
<td class="gt_row gt_right" headers="Futility">0.1237</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Events: 385</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.7945</td>
<td class="gt_row gt_right" headers="Futility">0.8887</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Month: 48</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0122</td>
<td class="gt_row gt_right" headers="Futility">0.8765</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.8311</td>
<td class="gt_row gt_right" headers="Futility">0.0202</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">1.9611</td>
<td class="gt_row gt_right" headers="Futility">1.9611</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">N: 1520</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.0249</td>
<td class="gt_row gt_right" headers="Futility">0.0249</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 392</td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.8203</td>
<td class="gt_row gt_right" headers="Futility">0.8203</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Month: 60</td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=1</td>
<td class="gt_row gt_right" headers="Efficacy">0.0250</td>
<td class="gt_row gt_right" headers="Futility">0.9750</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">P(Cross) if HR=0.72</td>
<td class="gt_row gt_right" headers="Efficacy">0.9000</td>
<td class="gt_row gt_right" headers="Futility">0.1000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>We see in this table that only 7 events are expected in the final year under design assumptions. However, it is quite possible that event rate assumptions will be incorrect and that this duration of follow-up is wanted to reasonably evaluate the possibility of a plateau in survival. We note that with 18 months enrollment duration expected, this would give complete follow-up through 42 months at the planned end of the trial.</p>
</section><section id="updating-calendar-based-spending-bounds-at-analysis" class="level3" data-number="2.5.4"><h3 data-number="2.5.4" class="anchored" data-anchor-id="updating-calendar-based-spending-bounds-at-analysis">
<span class="header-section-number">2.5.4</span> Updating calendar-based spending bounds at analysis</h3>
<p>We provide an example where assumptions incorrectly predicted event accrual to show some potential advantages and disadvantages of calendar-based timing. The deviations can be due to enrollment being different than planned, patient event rates different than planned, or treatment effect different than planned. The desire is to have a design that adapts bounds well to a variety of scenarios, allows carrying the trial to the targeted duration, and provides reasonable power. For our example, we assume events accumulate more rapidly than under the design approximation. Analysis times are also assumed to deviate from plan which can be due to operational issues.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">actual_events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">110</span>, <span class="fl">230</span>, <span class="fl">333</span>, <span class="fl">444</span>, <span class="fl">475</span>, <span class="fl">500</span><span class="op">)</span></span>
<span><span class="va">actual_analysis_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">11.5</span>, <span class="fl">17</span>, <span class="fl">22.5</span>, <span class="fl">37</span>, <span class="fl">49</span>, <span class="fl">62</span><span class="op">)</span></span>
<span><span class="va">ku</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">actual_events</span><span class="op">)</span></span>
<span><span class="va">usTime</span> <span class="op">&lt;-</span> <span class="va">actual_analysis_times</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">cure_model_design</span><span class="op">$</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">lsTime</span> <span class="op">&lt;-</span> <span class="va">usTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We update by using actual event counts and calendar times of analysis, otherwise copying parameters from the planned design in <code>cure_model_design</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cure_model_update</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsDesign.html">gsDesign</a></span><span class="op">(</span></span>
<span>  k <span class="op">=</span> <span class="va">ku</span>,</span>
<span>  test.type <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">test.type</span>,</span>
<span>  alpha <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">alpha</span>,</span>
<span>  beta <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">beta</span>,</span>
<span>  astar <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">astar</span>,</span>
<span>  sfu <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">sf</span>,</span>
<span>  sfupar <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">upper</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  sfl <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">sf</span>,</span>
<span>  sflpar <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">lower</span><span class="op">$</span><span class="va">param</span>,</span>
<span>  n.I <span class="op">=</span> <span class="va">actual_events</span>,</span>
<span>  maxn.IPlan <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">n.I</span><span class="op">[</span><span class="va">cure_model_design</span><span class="op">$</span><span class="va">k</span><span class="op">]</span>,</span>
<span>  delta <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">delta</span>,</span>
<span>  delta1 <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">delta1</span>,</span>
<span>  delta0 <span class="op">=</span> <span class="va">cure_model_design</span><span class="op">$</span><span class="va">delta0</span>,</span>
<span>  usTime <span class="op">=</span> <span class="va">usTime</span>,</span>
<span>  lsTime <span class="op">=</span> <span class="va">lsTime</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://keaven.github.io/gsDesign/reference/gsBoundSummary.html">gsBoundSummary</a></span><span class="op">(</span></span>
<span>  <span class="va">cure_model_update</span>,</span>
<span>  deltaname <span class="op">=</span> <span class="st">"HR"</span>,</span>
<span>  logdelta <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  Nname <span class="op">=</span> <span class="st">"Events"</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  ddigits <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  tdigits <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"B-value"</span>, <span class="st">"CP"</span>, <span class="st">"CP H1"</span>, <span class="st">"PP"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"P(Cross) if HR="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">cure_model_design</span><span class="op">$</span><span class="va">hr0</span>, <span class="va">cure_model_design</span><span class="op">$</span><span class="va">hr</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Calendar-based spending design"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Update at time of analysis"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="bbgospcwaa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bbgospcwaa table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bbgospcwaa thead, #bbgospcwaa tbody, #bbgospcwaa tfoot, #bbgospcwaa tr, #bbgospcwaa td, #bbgospcwaa th {
  border-style: none;
}

#bbgospcwaa p {
  margin: 0;
  padding: 0;
}

#bbgospcwaa .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bbgospcwaa .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bbgospcwaa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bbgospcwaa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bbgospcwaa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bbgospcwaa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bbgospcwaa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bbgospcwaa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bbgospcwaa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bbgospcwaa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bbgospcwaa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bbgospcwaa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bbgospcwaa .gt_spanner_row {
  border-bottom-style: hidden;
}

#bbgospcwaa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bbgospcwaa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bbgospcwaa .gt_from_md > :first-child {
  margin-top: 0;
}

#bbgospcwaa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bbgospcwaa .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bbgospcwaa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bbgospcwaa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bbgospcwaa .gt_row_group_first td {
  border-top-width: 2px;
}

#bbgospcwaa .gt_row_group_first th {
  border-top-width: 2px;
}

#bbgospcwaa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bbgospcwaa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bbgospcwaa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bbgospcwaa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bbgospcwaa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bbgospcwaa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bbgospcwaa .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bbgospcwaa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bbgospcwaa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bbgospcwaa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bbgospcwaa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bbgospcwaa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bbgospcwaa .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bbgospcwaa .gt_left {
  text-align: left;
}

#bbgospcwaa .gt_center {
  text-align: center;
}

#bbgospcwaa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bbgospcwaa .gt_font_normal {
  font-weight: normal;
}

#bbgospcwaa .gt_font_bold {
  font-weight: bold;
}

#bbgospcwaa .gt_font_italic {
  font-style: italic;
}

#bbgospcwaa .gt_super {
  font-size: 65%;
}

#bbgospcwaa .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bbgospcwaa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bbgospcwaa .gt_indent_1 {
  text-indent: 5px;
}

#bbgospcwaa .gt_indent_2 {
  text-indent: 10px;
}

#bbgospcwaa .gt_indent_3 {
  text-indent: 15px;
}

#bbgospcwaa .gt_indent_4 {
  text-indent: 20px;
}

#bbgospcwaa .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="4" class="gt_heading gt_title gt_font_normal">Calendar-based spending design</th>
</tr>
<tr class="odd gt_heading">
<th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">Update at time of analysis</th>
</tr>
<tr class="header gt_col_headings">
<th id="Analysis" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analysis</th>
<th id="Value" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Value</th>
<th id="Efficacy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Efficacy</th>
<th id="Futility" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Futility</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 1: 28%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">4.98740</td>
<td class="gt_row gt_right" headers="Futility">-1.95090</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 110</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00000</td>
<td class="gt_row gt_right" headers="Futility">0.97447</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.38633</td>
<td class="gt_row gt_right" headers="Futility">1.45067</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00000</td>
<td class="gt_row gt_right" headers="Futility">0.00012</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 2: 59%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">4.05365</td>
<td class="gt_row gt_right" headers="Futility">-1.07932</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 230</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00003</td>
<td class="gt_row gt_right" headers="Futility">0.85978</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.58592</td>
<td class="gt_row gt_right" headers="Futility">1.15296</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00003</td>
<td class="gt_row gt_right" headers="Futility">0.00017</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 3: 85%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">3.49142</td>
<td class="gt_row gt_right" headers="Futility">-0.34707</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 333</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00024</td>
<td class="gt_row gt_right" headers="Futility">0.63573</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.68205</td>
<td class="gt_row gt_right" headers="Futility">1.03877</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00023</td>
<td class="gt_row gt_right" headers="Futility">0.00035</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 4: 113%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.62935</td>
<td class="gt_row gt_right" headers="Futility">0.83053</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 444</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.00428</td>
<td class="gt_row gt_right" headers="Futility">0.20312</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.77914</td>
<td class="gt_row gt_right" headers="Futility">0.92420</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00406</td>
<td class="gt_row gt_right" headers="Futility">0.00399</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">IA 5: 121%</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">2.22680</td>
<td class="gt_row gt_right" headers="Futility">1.57246</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 475</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.01298</td>
<td class="gt_row gt_right" headers="Futility">0.05792</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.81518</td>
<td class="gt_row gt_right" headers="Futility">0.86563</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.00881</td>
<td class="gt_row gt_right" headers="Futility">0.01842</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis">Final</td>
<td class="gt_row gt_left" headers="Value">Z</td>
<td class="gt_row gt_right" headers="Efficacy">1.97178</td>
<td class="gt_row gt_right" headers="Futility">1.97178</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis">Events: 500</td>
<td class="gt_row gt_left" headers="Value">p (1-sided)</td>
<td class="gt_row gt_right" headers="Efficacy">0.02432</td>
<td class="gt_row gt_right" headers="Futility">0.02432</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">~HR at bound</td>
<td class="gt_row gt_right" headers="Efficacy">0.83831</td>
<td class="gt_row gt_right" headers="Futility">0.83831</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Analysis"></td>
<td class="gt_row gt_left" headers="Value">Spending</td>
<td class="gt_row gt_right" headers="Efficacy">0.01187</td>
<td class="gt_row gt_right" headers="Futility">0.07696</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-deCastroGAMLSS" class="csl-entry" role="listitem">
De Castro, Mario, Vicente G Cancho, and Josemar Rodrigues. 2010. <span>“A Hands-on Approach for Fitting Long-Term Survival Models Under the GAMLSS Framework.”</span> <em>Computer Methods and Programs in Biomedicine</em> 97 (2): 168–77.
</div>
<div id="ref-AFCAPSdesign" class="csl-entry" role="listitem">
Downs, John R, Polly A Beere, Edwin Whitney, Michael Clearfield, Stephen Weis, Jeffrey Rochen, Evan A Stein, Deborah R Shapiro, Alexandra Langendorfer, and Antonio M Gotto Jr. 1997. <span>“Design &amp; Rationale of the Air Force/Texas Coronary Atherosclerosis Prevention Study (AFCAPS/TexCAPS).”</span> <em>The American Journal of Cardiology</em> 80 (3): 287–93.
</div>
<div id="ref-AFCAPSresults" class="csl-entry" role="listitem">
Downs, John R, Michael Clearfield, Stephen Weis, Edwin Whitney, Deborah R Shapiro, Polly A Beere, Alexandra Langendorfer, et al. 1998. <span>“Primary Prevention of Acute Coronary Events with Lovastatin in Men and Women with Average Cholesterol Levels: Results of AFCAPS/TexCAPS.”</span> <em>Journal of the American Medical Association</em> 279 (20): 1615–22.
</div>
<div id="ref-KEYNOTE189" class="csl-entry" role="listitem">
Gandhi, Leena, Delvys Rodrı́guez-Abreu, Shirish Gadgeel, Emilio Esteban, Enriqueta Felip, Flávia De Angelis, Manuel Domine, et al. 2018. <span>“Pembrolizumab Plus Chemotherapy in Metastatic Non–Small-Cell Lung Cancer.”</span> <em>New England Journal of Medicine</em> 378 (22): 2078–92.
</div>
<div id="ref-hellmann2017estimating" class="csl-entry" role="listitem">
Hellmann, Matthew David, Junshui Ma, Edward B Garon, Rina Hui, Leena Gandhi, Jean-Charles Soria, Keaven M Anderson, Gregory M Lubiniecki, Bilal Piperdi, and Roy S Herbst. 2017. <span>“Estimating Long-Term Survival of PD-L1-Expressing, Previously Treated, Non-Small Cell Lung Cancer Patients Who Received Pembrolizumab in KEYNOTE-001 and-010.”</span> American Society of Clinical Oncology.
</div>
<div id="ref-HSD" class="csl-entry" role="listitem">
Hwang, Irving K, Weichung J Shih, and John S De Cani. 1990. <span>“Group Sequential Designs Using a Family of Type <span>I</span> Error Probability Spending Functions.”</span> <em>Statistics in Medicine</em> 9 (12): 1439–45.
</div>
<div id="ref-KimTsiatis" class="csl-entry" role="listitem">
Kim, Kyungmann, and Anastasios A. Tsiatis. 1990. <span>“Study Duration for Clinical Trials with Survival Response and Early Stopping Rule.”</span> <em>Biometrics</em> 46: 81–92.
</div>
<div id="ref-LachinFoulkes" class="csl-entry" role="listitem">
Lachin, John M., and Mary A. Foulkes. 1986. <span>“Evaluation of Sample Size and Power for Analyses of Survival with Allowance for Nonuniform Patient Entry, Losses to Follow-up, Noncompliance, and Stratification.”</span> <em>Biometrics</em> 42: 507–19.
</div>
<div id="ref-LanDeMets" class="csl-entry" role="listitem">
Lan, K. K. G., and David L. DeMets. 1983. <span>“Discrete Sequential Boundaries for Clinical Trials.”</span> <em>Biometrika</em> 70: 659–63.
</div>
<div id="ref-LanDeMets1989" class="csl-entry" role="listitem">
———. 1989. <span>“Group Sequential Procedures: Calendar Versus Information Time.”</span> <em>Statistics in Medicine</em> 8: 1191–98.
</div>
<div id="ref-MaurerBretz2013" class="csl-entry" role="listitem">
Maurer, Willi, and Frank Bretz. 2013. <span>“Multiple Testing in Group Sequential Trials Using Graphical Approaches.”</span> <em>Statistics in Biopharmaceutical Research</em> 5: 311–20.
</div>
<div id="ref-Schoenfeld1981" class="csl-entry" role="listitem">
Schoenfeld, David. 1981. <span>“The Asymptotic Properties of Nonparametric Tests for Comparing Survival Distributions.”</span> <em>Biometrika</em> 68 (1): 316–19.
</div>
<div id="ref-EXAMINEdesign" class="csl-entry" role="listitem">
White, William B, George L Bakris, Richard M Bergenstal, Christopher P Cannon, William C Cushman, Penny Fleck, Simon Heller, et al. 2011. <span>“EXamination of cArdiovascular outcoMes with alogliptIN Versus Standard of carE in Patients with Type 2 Diabetes Mellitus and Acute Coronary Syndrome (EXAMINE): A Cardiovascular Safety Study of the Dipeptidyl Peptidase 4 Inhibitor Alogliptin in Patients with Type 2 Diabetes with Acute Coronary Syndrome.”</span> <em>American Heart Journal</em> 162 (4): 620–26.
</div>
<div id="ref-EXAMINEresults" class="csl-entry" role="listitem">
White, William B, Christopher P Cannon, Simon R Heller, Steven E Nissen, Richard M Bergenstal, George L Bakris, Alfonso T Perez, et al. 2013. <span>“Alogliptin After Acute Coronary Syndrome in Patients with Type 2 Diabetes.”</span> <em>New England Journal of Medicine</em> 369: 1327–35.
</div>
<div id="ref-Zeng2006" class="csl-entry" role="listitem">
Zeng, Donglin, Guosheng Yin, and Joseph G Ibrahim. 2006. <span>“Semiparametric Transformation Models for Survival Data with a Cure Fraction.”</span> <em>Journal of the American Statistical Association</em> 101 (474): 670–84.
</div>
<div id="ref-Zhang2018" class="csl-entry" role="listitem">
Zhang, Yilong, and Yongzhao Shao. 2018. <span>“Concordance Measure and Discriminatory Accuracy in Transformation Cure Models.”</span> <em>Biostatistics</em> 19 (1): 14–26.
</div>
</div>
</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/keaven\.github\.io\/gsd-deming\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./background.html" class="pagination-link" aria-label="Background">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Background</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ahr.html" class="pagination-link" aria-label="Average hazard ratio">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Average hazard ratio</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/keaven/gsd-deming/edit/main/proportional-hazards.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/keaven/gsd-deming/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/keaven/gsd-deming/blob/main/proportional-hazards.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div></div></footer></body></html>